<ion-header>
  <ion-navbar>
    <ion-title>Krato App</ion-title>
  </ion-navbar>
</ion-header>

<ion-content style="background-color: #ddd;">
<ion-grid>

  <div *ngFor="let c of comerPrueba | async"> {{ c.nombre }}</div>
  <!-- Barra de Busqueda -->
  <ion-row>
    <ion-col width-50 offset-25 style="text-align:center;">
      <ion-searchbar [(ngModel)]="termino" [formControl]="controlBusqueda" (ionInput)="mientrasEscribe()" placeholder="Buscar local"></ion-searchbar>
          
      <div *ngIf="buscando" class="spinner-container">
        <ion-spinner></ion-spinner>
      </div>
    </ion-col>
  </ion-row>

  <!-- Linsk por sectores -->
  <ion-row>
    <ion-col style="text-align: center;">
      <button ion-button (click)="localesFiltradosSector('Pizzeria')" clear>
      
        <span *ngIf="sector =='Pizzeria'" >  
          <ion-icon style="font-size:5em;" name="pizza"></ion-icon> <!-- Pizzerias -->
        </span>
        <span *ngIf="sector !='Pizzeria'" style="color:#3e3e3e">  
          <ion-icon style="font-size:3em;" name="pizza"></ion-icon> <!-- Pizzerias -->
        </span>
      
      </button>

      <button ion-button (click)="localesFiltradosSector('Licoreria')" clear>
        
        <span *ngIf="sector =='Licoreria'">  
          <ion-icon style="font-size:5em;" name="beer"></ion-icon> <!-- Licorerias -->
        </span>
        <span *ngIf="sector !='Licoreria'" style="color:#3e3e3e">  
          <ion-icon style="font-size:3em;" name="beer"></ion-icon> <!-- Licorerias -->
        </span>

      </button>

      <button ion-button (click)="localesFiltradosSector('Libreria')" clear>
        
        <span *ngIf="sector =='Libreria'">  
          <ion-icon style="font-size:5em;" name="book"></ion-icon> <!-- Librerias -->
        </span>
        <span *ngIf="sector !='Libreria'" style="color:#3e3e3e">  
          <ion-icon style="font-size:3em;" name="book"></ion-icon> <!-- Librerias -->
        </span>
      
      </button>

      <button ion-button (click)="localesFiltrados()" clear>

        <span *ngIf="sector ==''">  
          <ion-icon style="font-size:5em;" name="globe"></ion-icon> <!-- Todo -->
        </span>
        <span *ngIf="sector !=''" style="color:#3e3e3e">  
          <ion-icon style="font-size:3em;" name="globe"></ion-icon> <!-- Todo -->
        </span>

      </button>

      <button ion-button (click)="localesFiltradosSector('Farmacia')" clear>
      
        <span *ngIf="sector =='Farmacia'">  
          <ion-icon style="font-size:5em;" name="medkit"></ion-icon> <!-- Farmacias -->
        </span>
        <span *ngIf="sector !='Farmacia'" style="color:#3e3e3e">  
          <ion-icon style="font-size:3em;" name="medkit"></ion-icon> <!-- Farmacias -->
        </span>
      
      </button>

      <button ion-button (click)="localesFiltradosSector('Ropa')" clear>

        <span *ngIf="sector =='Ropa'">  
          <ion-icon style="font-size:5em;" name="bowtie"></ion-icon> <!-- Ropa -->
        </span>
        <span *ngIf="sector !='Ropa'" style="color:#3e3e3e">  
          <ion-icon style="font-size:3em;" name="bowtie"></ion-icon> <!-- Ropa -->
        </span>

      </button>

      <button ion-button (click)="localesFiltradosSector('Mercado')" clear>

        <span *ngIf="sector =='Mercado'">  
          <ion-icon style="font-size:5em;" name="basket"></ion-icon> <!-- Mercados -->
        </span>
        <span *ngIf="sector !='Mercado'" style="color:#3e3e3e">  
          <ion-icon style="font-size:3em;" name="basket"></ion-icon> <!-- Mercados -->
        </span>

      </button>
    </ion-col>
  </ion-row>

  <!-- Ordenar lista -->
  <ion-row center>
      <ion-label style="text-align: right;">Ordenar:</ion-label>
      <button ion-button style="padding: 1em;width: 4rem;height: 4rem;" (click)="orderMenor()">
        <ion-icon name="arrow-down" item-right></ion-icon>
      </button>

      <button ion-button style="padding: 1em;width: 4rem;height: 4rem;" (click)="orderMayor()">
        <ion-icon name="arrow-up" item-right></ion-icon>
      </button>
  </ion-row>

  <!-- Lista de locales -->
  <ion-list>
    <ion-card *ngFor="let local of comercios_json" (click)="itemTapped($event, local)">  
    <!-- <button > -->
    <ion-card-content>
    <ion-card-title>
      {{local.nombre}}
      <br>
      <ion-icon  name="star" *ngFor="let i of getNumber(local.rating)"></ion-icon><ion-icon  name="star-outline" *ngFor="let i of getNumber(5 - local.rating)"></ion-icon>
    </ion-card-title>
      <p>
    
        {{local.sector}}
      </p>
    </ion-card-content>
  
    </ion-card>
  </ion-list>

  <div *ngIf="selectedItem" padding>
    Detalles: <b>{{selectedItem.nombre}}</b>
  </div>
</ion-grid>
</ion-content>